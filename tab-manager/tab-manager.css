html, body {
  height: 100%;
  margin: 0;
  padding: 0;
}
body {
  user-select: none; /* Disable text selection */
  display: flex;
  flex-direction: column;
}

:root {
  /* Approximate heights for header and search box including padding/margin/border */
  /* #tab-manager-header: h3(14px font-size, approx 18px actual) + 4px pt + 12px pb + 1px bb + 8px mb = 43px */
  --header-total-height: 43px;
  /* #search-box: input(approx 20px) + 8px pt + 8px pb + 12px mb = 48px */
  --search-box-total-height: 48px;
  --total-fixed-height: calc(var(--header-total-height) + var(--search-box-total-height));
}

#tab-manager-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 4px 6px 12px 6px;
  border-bottom: 1px solid var(--header-bg);
  margin-bottom: 8px;
  flex-grow: 0;
  flex-shrink: 0;
}
#tab-manager-header h3 { margin: 0; font-size: 14px; }
#tab-manager-header .header-actions { display: flex; }
#tab-manager-header .header-actions .action-btn svg { stroke: #111111; }
#tab-manager-header .header-actions .action-btn:disabled { opacity: 1; cursor: not-allowed; }
#tab-manager-header .header-actions .action-btn:disabled svg { stroke: #999999; }
#tab-manager-header .header-actions .action-btn.close:not(:disabled) svg { stroke: #EC0A11; }
#search-box {
  display: block;
  background-color: var(--search-bg);
  border: 1px solid var(--border-color);
  border-radius: 4px;
  color: var(--text-color);
  padding: 8px;
  margin-bottom: 12px;
  font-size: 12px;
  box-sizing: border-box;
  width: 100%;
  flex-grow: 0;
  flex-shrink: 0;
}
#search-box::placeholder { color: var(--placeholder-text); }
#search-box:focus { border-color: var(--focus-border); outline: none; }
.section-title { font-size: 11px; text-transform: uppercase; color: var(--section-title-text); margin: 12px 0 4px 0; }
#window-groups-container {
  height: calc(100% - var(--total-fixed-height)); /* Explicit height calculation */
  overflow-y: auto; /* Enable vertical scrolling */
  padding-right: 5px; /* Add some padding for scrollbar */
  flex-grow: 0; /* No need for flex-grow if height is explicit */
  flex-shrink: 0; /* No need for flex-shrink if height is explicit */
}
.browser-tab-item {
  display: flex;
  flex-direction: column;
  align-items: stretch;
  padding: 6px;
  border-radius: 4px;
  position: relative;
  cursor: pointer;
  transition: all 0.3s ease-in-out;
  border-top: 2px solid transparent;
  border-bottom: 2px solid transparent;
  margin-top: -2px;
  margin-bottom: 0;
  overflow: hidden; /* Added for smooth collapse */
  opacity: 1; /* Initial opacity for transition */
}
.browser-tab-item.is-collapsed-item {
  max-height: 0;
  opacity: 0;
  margin: 0;
  padding: 0;
  border: none;
}
.browser-tab-item:hover { background-color: var(--item-hover-bg); }
.browser-tab-item.is-active { background-color: var(--active-item-bg); }
.browser-tab-item.is-selected { background-color: var(--active-item-bg); }
.browser-tab-item.is-active::before { content: ''; position: absolute; left: 0; top: 0; bottom: 0; width: 0; /* Removed active indicator */ }
.browser-tab-item.is-selected::after { content: ''; position: absolute; left: 0; top: 0; bottom: 0; width: 2px; background-color: #324b86; /* Changed color for selected indicator */ border-radius: 4px 0 0 4px; }
.browser-tab-item.dragging { opacity: 0.4; background-color: var(--item-hover-bg); }
.browser-tab-item.drag-over-top { border-top-color: var(--focus-border); }
.browser-tab-item.drag-over-bottom { border-bottom-color: var(--focus-border); }
.browser-tab-item-main { display: flex; align-items: center; flex-grow: 1; min-width: 0; }
.browser-tab-item-main-clickable { display: flex; align-items: center; flex-grow: 1; min-width: 0; }
.browser-tab-item-main-clickable .group-icon { margin-right: 8px; }
.browser-tab-item-main-clickable .group-icon svg { width: 16px; height: 16px; stroke: var(--icon-stroke); }
.browser-tab-item-main-clickable img { width: 16px; height: 16px; margin-right: 8px; flex-shrink: 0; }
.browser-tab-item-main-clickable span { flex-grow: 1; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; font-size: 12px; }
.browser-tab-item-main-clickable span.blurred { filter: blur(4px); }
.browser-tab-actions { display: flex; align-items: center; visibility: hidden; }
.browser-tab-item:hover .browser-tab-actions { visibility: visible; }
.action-btn { background: none; border: none; cursor: pointer; padding: 2px 4px; display: flex; align-items: center; justify-content: center; }
.action-btn svg { width: 14px; height: 14px; stroke: var(--icon-stroke); }
.action-btn:hover svg { stroke: var(--icon-stroke-hover); }
.action-btn.active.star svg { stroke: #FFEA00; fill: #FFEA00; }
.action-btn.active.pin svg { stroke: #1677ff; fill: #1677ff; }
.action-btn.active.link svg { stroke: #1677ff; }
.action-btn.close svg { stroke: #FF0000; }
.action-btn.close:disabled svg { stroke: var(--icon-stroke); }
.tab-url { font-size: 10px; color: var(--url-text); white-space: nowrap; overflow: hidden; text-overflow: ellipsis; margin-top: 4px; display: none; }
.tab-url.visible { display: block; }

.dialog-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background-color: rgba(0,0,0,0.5); display: flex; justify-content: center; align-items: center; z-index: 1000; }
.dialog-content { background-color: var(--bg-color); padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); width: 300px; }
.dialog-content h3 { margin-top: 0; }
.dialog-content form { display: flex; flex-direction: column; }
.dialog-content input { margin-bottom: 10px; padding: 8px; border-radius: 4px; border: 1px solid var(--border-color); background-color: var(--search-bg); color: var(--text-color); }
.color-options { display: flex; justify-content: flex-start; margin-bottom: 15px; flex-wrap: wrap; gap: 5px; }
.color-option { width: 18px; height: 18px; border-radius: 50%; cursor: pointer; border: 2px solid transparent; }
.color-option.selected { border-color: var(--focus-border); }
.dialog-buttons { display: flex; justify-content: flex-end; gap: 10px; }
.dialog-buttons button { padding: 8px 16px; border-radius: 4px; border: none; cursor: pointer; }
.dialog-buttons button[type="submit"] { background-color: var(--focus-border); color: white; }
.dialog-buttons button[type="button"] { background-color: var(--item-hover-bg); color: var(--text-color); }
.tab-group-header { padding: 4px 8px; font-size: 11px; font-weight: bold; border-radius: 4px; margin: 4px 0; color: white; display: flex; align-items: center; cursor: pointer; justify-content: space-between; }
.tab-group-header .chevron { margin-right: 5px; display: flex; align-items: center; }
.tab-group-header .chevron svg { width: 16px; height: 16px; stroke: white; }
.tab-group-header .action-btn { margin-left: 8px; } /* Adjusted margin */
.tab-group-header > div:first-child { flex-grow: 1; display: flex; align-items: center; } /* New style for left content */

.color-blue { background-color: #0279E7; }
.color-cyan { background-color: #56B0A7; }
.color-green { background-color: #07C872; }
.color-grey { background-color: #1F262E; }
.color-orange { background-color: #FBAC73; }
.color-pink { background-color: #B01C89; }
.color-purple { background-color: #A35DA1; }
.color-red { background-color: #D6966B; }
.color-yellow { background-color: #DEC981; }
